# Saga Conductor Demo

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **Saga** (–æ—Ä–∫–µ—Å—Ç—Ä–æ–≤–∞—è –º–æ–¥–µ–ª—å) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Netflix Conductor OSS**, **Java 21** –∏ **Spring Boot 4.0+**.

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ü–µ–ø–æ—á–∫—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫–∞–∑–æ–≤. –ö–∞–∂–¥–∞—è —Å—Ç–∞–¥–∏—è (–û–ø–ª–∞—Ç–∞, –°–∫–ª–∞–¥, –î–æ—Å—Ç–∞–≤–∫–∞) —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –≤–æ—Ä–∫–µ—Ä–æ–º. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä Conductor —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (–æ—Ç–∫–∞—Ç–∞) –≤ —Å–ª—É—á–∞–µ —Å–±–æ–µ–≤.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Java 21**.
- **Netflix Conductor OSS**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
- **Netflix Conductor OSS Java SDK**: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.
- **MapStruct**: –ú–∞–ø–ø–∏–Ω–≥ —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ DTO/Records –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
- **JPA Specifications**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —Å–ª–æ–∂–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º (–≤–∫–ª—é—á–∞—è –ø–æ–∏—Å–∫ –≤–Ω—É—Ç—Ä–∏ JSONB).

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–Ω–∞—è –≤ *docker-compose.yaml* –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:
- **Conductor-server**
- **Conductor UI**
- **PostgreSql**
- **Saga-conductor-demo app** —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–°–±–æ—Ä–∫–∞ —Å –ø–æ–º–æ—â—å—é Docker Compose:
```bash
docker-compose build
```

**Conductor UI: http://localhost:5000**

**PostgreSQL: localhost:5432 (user: postgres, pass: postgres)**

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
docker compose up -d
```


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –°–∞–≥–∏
   –î–ª—è —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:
```bash
curl -X POST http://localhost:8090/api/orders/start-saga \
    -H "Content-Type: application/json" \
    -d '{
      "userId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "items": ["Laptop", "Mouse"],
      "amount": 1500.00
    }'
```
2. –ü–æ–∏—Å–∫ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è (UserInfo)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–º —Å—É—â–Ω–æ—Å—Ç—è–º —Å—Ä–∞–∑—É.
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã):
```bash
curl "http://localhost:8090/api/orders/search?status=FAILED&item=Macbook&minAmount=1000&page=0&size=10&sort=createdAt,desc"
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
- userId: UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- status: –°—Ç–∞—Ç—É—Å —à–∞–≥–∞ (PENDING, COMPLETED, FAILED).
- minAmount / maxAmount: –î–∏–∞–ø–∞–∑–æ–Ω —Å—É–º–º—ã –æ–ø–ª–∞—Ç—ã.
- item: –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞ –≤–Ω—É—Ç—Ä–∏ JSONB-–º–∞—Å—Å–∏–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ Inventory.
- address: –ü–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É –¥–æ—Å—Ç–∞–≤–∫–∏.
